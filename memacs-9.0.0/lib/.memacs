# .memacs	Ver. 9.0.0
#	MightEMacs user startup file.

# Pop or open file whose pathname is the current buffer line or current region.
macro openBufPath(0) {desc: 'Get a pathname from current buffer line (or region if n <= 0) and display the file in a pop-up\
 window (or open it with ~bfindFile~0 if n >= 0).'}
	path = ($0 <= 0 && $0 != defn) ? $RegionText : $lineText
	if !empty?(path = prompt($0 >= 0 ? 'Find file' : 'Pop file',path,'f'))
		if $0 >= 0
			findFile path
		else
			1 => popFile path,'a'
		endif
	endif
endmacro

# Pop a list of all buffers.
macro popBufAll(0) {desc: 'Display all buffers in a pop-up window.'}
	bufName = (0 => showBuffers)[0]
	1 => popBuf bufName,'d'
endmacro

# Put current keyboard macro into a scratch buffer so it can be edited.
macro editKeyMacro(0) {desc: 'Edit current keyboard macro.'}
	scratchBuf
	insert "# Edit next line, then enter \"C-x x\" to execute this buffer and set the new macro contents.\n\
$keyMacro = '",$keyMacro,"'"
	beginLine
endmacro

bindKey 'ESC E',editKeyMacro
bindKey 'C-x o',openBufPath
bindKey 'C-h B',popBufAll
