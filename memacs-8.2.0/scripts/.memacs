# .memacs	Ver. 8.2.0
#	MightEMacs user startup file.

# Enable "safe" mode if marker file present in output directory so that symbolic links will not be followed and hard links
# will be broken on update.
$SafeFile = '.safe'			# Marker file.

# Adjust 'safe' global mode before files are written.  Arguments: (1), buffer name; (2), filename.
macro checkSafe,2
	(fileExists?(sprintf '%s/%s',1 => dirname($2),$SafeFile) ? 1 : -1) => alterGlobalMode 'safe'
endmacro

setHook 'write',checkSafe		# Set write hook.
-1 => alterShowMode 'safe'		# Don't show 'safe' mode (going on and off) in mode line.
